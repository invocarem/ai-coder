# Augustine MCP Server (Cassandra + MCP)

This is a standalone MCP server that connects remotely to a Cassandra database.  
It is designed to be deployed alongside Cassandra using Docker Compose.

## Build the image

```bash
# From the project root
docker build -t augustine-mcp -f services/augustine-server/Dockerfile .
```

## Run the service (recommended with docker-compose)

```bash
# Start both Cassandra and Augustine MCP server
docker-compose up
```

This will:

1. Start `cassandra-server` (listening on port 9042)
2. Start `augustine-mcp` (MCP server via stdio, no HTTP port exposed)
3. Connect `augustine-mcp` to Cassandra using `CASSANDRA_HOST=cassandra-server`

## MCP Tools

| Tool Name          | Description                                                                                                                                                                       |
| ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `analyze_psalm`    | Process a psalm query using the Augustine RAG processor (legacy interface). Input: `pattern_data`, `model`, `stream` (optional), `original_data` (optional). Returns JSON result. |
| `ask_augustine`    | Ask Augustine a question about a psalm (simplified interface). Input: `pattern`, `psalm_number`, `model`, `verse_number` (optional), `question` (optional). Returns JSON result.  |
| `get_psalm_health` | Check the health status of the Augustine processor. Returns health information.                                                                                                   |

### Example `analyze_psalm` call (via Cline):

```json
{
  "pattern_data": {
    "pattern": "psalm_query",
    "psalm_number": 23,
    "question": "What does Augustine say about Psalm 23?"
  },
  "model": "gpt-4o-mini",
  "stream": false,
  "original_data": {}
}
```

### Example `ask_augustine` call (via Cline):

The `ask_augustine` tool provides a simplified interface for querying Augustine's commentary on psalms. It accepts direct parameters instead of nested objects.

**Basic usage - theological interpretation:**

```json
{
  "pattern": "augustine_psalm_query",
  "psalm_number": 23,
  "model": "gpt-4o-mini"
}
```

**With a specific question:**

```json
{
  "pattern": "augustine_psalm_query",
  "psalm_number": 23,
  "question": "What does Augustine say about the shepherd imagery in this psalm?",
  "model": "gpt-4o-mini"
}
```

**Analyzing a specific verse:**

```json
{
  "pattern": "augustine_psalm_query",
  "psalm_number": 23,
  "verse_number": 1,
  "question": "How does Augustine interpret the opening verse?",
  "model": "gpt-4o-mini"
}
```

**Latin word morphology analysis:**

```json
{
  "pattern": "psalm_word_analysis",
  "psalm_number": 23,
  "verse_number": 1,
  "question": "Analyze the Latin word 'Dominus' in this verse",
  "model": "gpt-4o-mini"
}
```

**Parameters:**

- `pattern` (required): The type of analysis. Use `"augustine_psalm_query"` for theological interpretation or `"psalm_word_analysis"` for Latin word morphology analysis.
- `psalm_number` (required): The psalm number as an integer.
- `model` (required): The AI model to use (e.g., `"gpt-4o-mini"`, `"gpt-4"`, `"llama3"`).
- `verse_number` (optional): The verse number as an integer. If omitted, analyzes the entire psalm.
- `question` (optional): A specific question to ask. If omitted, a default question is generated based on context.

## Notes

- The `augustine-mcp` container does **not** include Cassandra â€” it connects to it remotely via network.
- The `CASSANDRA_HOST` environment variable (set to `cassandra-server` in docker-compose) configures the connection.
- Use `docker-compose.yml` to manage the full stack.
- If you need to modify the processor or add additional tools, edit `services/augustine-server/augustine_server.py` and rebuild the image.

---

_Generated by Cline AI._
